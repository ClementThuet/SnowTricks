{% extends 'base.html.twig' %}

{% block title %}Accueil - SnowTricks{% endblock %}
{% block body %}
    {% block content %}
        <div class="container-fluid">
            <div class="row" >
                <div class="col-12">
                    <nav class="navbar navbar-expand-md navbar-ST" >
                        <a class="navbar-brand navbar-brand-ST" href="/SnowTricks/public/">SnowTricks</a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToCollapse">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse navigation-menu"  id='navbarToCollapse' >
                            <ul class="navbar-nav ">
                                <li class="nav-item active ">
                                  <a class=" nav-link-ST " href="/SnowTricks/public/">Les figures <span class="sr-only">(current)</span></a>
                                </li>
                                <li class="nav-item">
                                  <a class=" nav-link-ST" href="/SnowTricks/public/inscription">S'inscrire</a>
                                </li>
                                <li class="nav-item">
                                  <a class=" nav-link-ST"  href="/SnowTricks/public/connexion">Connexion</a>
                                </li>
                                {%if is_granted('IS_AUTHENTICATED_FULLY') == true %}
                                    <li class="nav-item">
                                      <a class=" nav-link-ST"  href="/SnowTricks/public/deconnexion">Déconnexion</a>
                                    </li>
                                {%endif%}
                            </ul>
                        </div>
                    </nav>
                   
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <h1 class="trick-name">{{figure.nom}}</h1>
                    <div class="trick-presentation">
                        <img class="trick-main-picture" src="{{figure.mainPicture.url}}" alt="{{figure.mainPicture.alt}}">
                    </div>
                </div>
            </div>
            <div class="row">
                {% for media in medias %}
                    <div class="col-3">
                        <div class="media-trick">
                            <h5 class="ST-title">{{media.titre}}</h5>
                            {%if media.isImage == true%}
                                <img class="img-trick" src="{{media.url}}" alt="{{media.alt}}">
                            {%else%}
                                <iframe class="video-trick"
                                    src="{{media.url}}">
                                </iframe>
                            {%endif%}
                            <br>
                            <div class="glyph-container">
                                <a href="/SnowTricks/public/modifier-un-media/{{media.id}}/{{figure.id}}">
                                    <span class="glyphicon glyphicon-pencil glyphicon-media" aria-hidden="true"></span>
                                </a>
                                <a href="/SnowTricks/public/supprimer-un-media/{{media.id}}/{{figure.id}}">
                                    <span class="glyphicon glyphicon-remove " aria-hidden="true"></span>
                                </a>
                            </div>
                        </div>
                    </div>
                {%endfor%}
            </div>
            <div class="row">
                <div class="col-12">
                    <p class="trick-description">Description : {{figure.description}}</p>
                    <p class="trick-description">Cette figure appartient à la famille des <b>{{figure.groupe}}</b></p>
                </div>
                <div class="col-12">
                    <p class="trick-author">Trick ajouté par : <b>{{figure.utilisateur.prenom}} {{figure.utilisateur.nom}}</b> le <b>{{figure.dateCreation}}</b></p>
                    {%if figure.dernierUtilisateurModification.prenom is defined %}
                        <p class="trick-author">Dernière modification par : <b>{{figure.dernierUtilisateurModification.prenom}} {{figure.dernierUtilisateurModification.nom}}</b> le <b>{{figure.dateDerniereModification|date('d-m-Y')}}</b></p>
                    {%endif%}
                </div>
            </div>
            {% if is_granted('IS_AUTHENTICATED_FULLY') == true%}
                <div class="row">
                    <div class="col-12">
                        <h3 class="ST-title">Ajouter un commentaire</h3>
                        <div class="form-comment">
                            {{ form_start(form, {'attr': {'class': 'form-contenu-input'}}) }}
                            {{ form_errors(form) }}
                            <div class="form-group">
                                {{ form_row(form.contenu,{'attr':{'class':'form-control','placeholder':'Saisissez votre commentaire'}}) }}
                            </div>
                            <div class="form-group text-center">
                                {{ form_row(form.save,{'attr':{'class':'btn btn-primary'}}) }}
                            </div>
                            {{ form_end(form) }}
                        </div>
                    </div>
                </div>
            {%endif%}
            {#<div class="row">
                <div class="col-12">
                    {%for comment in comments%}
                        <div>
                            <img src="{comment.utilisateur.media.url}" alt="{utilisateur.media.url}">
                            <div class="trick-comment">
                                <p>{{comment.contenu}}</p>
                                <span> Le {{comment.date|date('d-m-Y')}} par {{comment.utilisateur.prenom}} {{comment.utilisateur.nom}}</span>
                            </div>
                        </div>
                        <hr>
                    {%endfor%}
                </div>
            </div>#}
        </div>
    {% endblock %}
{% endblock %}